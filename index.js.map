{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46206766-d6f3ed66bf4f64987a1edf465';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) { \n  const pageNum = Number(page);\n  const perPageNum = Number(perPage);\n\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${pageNum}&per_page=${perPageNum}`;\n\n  try {\n    const response = await axios.get(url);\n    \n    console.log('Response data:', response.data); \n\n    return response.data;\n  } catch (error) {\n    console.error('Fetching images failed:', error);\n    throw error; \n  }\n}","import { galleryLightbox } from '../main';\n\nexport function createImageCard(image) {\n    return `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" loading=\"lazy\" data-caption=\"${image.tags}\" />\n        <div class=\"info\">\n          <p><b>Likes:</b> ${image.likes}</p>\n          <p><b>Views:</b> ${image.views}</p>\n          <p><b>Comments:</b> ${image.comments}</p>\n          <p><b>Downloads:</b> ${image.downloads}</p>\n        </div>\n      </a>\n    `;\n}\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const imageCards = images.map(createImageCard).join('');\n  gallery.insertAdjacentHTML('beforeend', imageCards);\n  galleryLightbox.refresh();\n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}","import { fetchImages } from './js/pixabay-api';  \nimport { renderGallery, clearGallery } from './js/render-functions';\nimport './css/styles.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet currentPage = 1;\nconst perPage = 15;\nconst form = document.querySelector('#search-form');\nconst input = form.querySelector('input');\nconst loader = document.querySelector('.loader'); \nconst loadMoreBtn = document.querySelector('.load-btn');\nconst gallery = document.querySelector('.gallery');\n\nexport let galleryLightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'data-caption',\n  captionDelay: 250,\n});\n\nlet query = '';\nlet isEndOfResultsNotificationShown = false; \nlet isLoading = false; \n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n    e.preventDefault();\n    query = input.value.trim();\n  \n    if (!query) {\n      showNotification('warning', 'Please enter a search query!');\n      return;\n    }\n  \n    currentPage = 1;\n    clearGallery();\n    isEndOfResultsNotificationShown = false;\n  \n    toggleLoader(true); \n    loadMoreBtn.style.display = 'none';\n  \n    await searchImages(query); \n}\n\nasync function searchImages(query) {\n    if (isLoading) return;\n    isLoading = true;\n  \n    try {\n      const data = await fetchImages(query, currentPage, perPage);\n      \n      toggleLoader(false); \n\n      if (data.hits.length === 0) {\n        showNotification('info', 'Sorry, no images were found for your search query.');\n        return;\n      }\n  \n      renderGallery(data.hits);\n      galleryLightbox.refresh();\n  \n      if (data.totalHits > currentPage * perPage) {\n        loadMoreBtn.style.display = 'block';\n        isEndOfResultsNotificationShown = false;\n      } else {\n        loadMoreBtn.style.display = 'none';\n        if (!isEndOfResultsNotificationShown) {\n          showNotification('info', \"We're sorry, but you've reached the end of search results.\");\n          isEndOfResultsNotificationShown = true;\n        }\n      }\n  \n      smoothScroll(); \n      input.value = '';\n    } catch (error) {\n      toggleLoader(false); \n      showNotification('error', 'Something went wrong. Please try again later.');\n      console.error(error);\n    } finally {\n      isLoading = false; \n    }\n}\n\nfunction onLoadMore() {\n  if (isLoading) return; \n  currentPage += 1; \n  searchImages(query);\n}\n\nfunction toggleLoader(isLoadingFlag) {\n    if (loader) { \n        loader.style.display = isLoadingFlag ? 'flex' : 'none';\n    } else {\n        console.error('Loader element not found in the DOM.');\n    }\n}\n\nfunction showNotification(type, message) {\n  iziToast[type]( {\n    title: type.charAt(0).toUpperCase() + type.slice(1),\n    message,\n  });\n}\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector('.gallery').firstElementChild;\n  if (!firstCard) return;  \n  \n  const { height: cardHeight } = firstCard.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","pageNum","perPageNum","url","response","axios","error","createImageCard","image","renderGallery","images","gallery","imageCards","galleryLightbox","clearGallery","currentPage","form","input","loader","loadMoreBtn","SimpleLightbox","isEndOfResultsNotificationShown","isLoading","onSearch","onLoadMore","showNotification","toggleLoader","searchImages","data","smoothScroll","isLoadingFlag","type","message","iziToast","firstCard","cardHeight"],"mappings":"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"}